import{W as Y}from"./Wiki-oibEcKux.js";import{f as R,K as N,i as u,o as L,g as O,v as b,z as T,I as o,O as Q,B as G,L as q,x as l,A as m,aa as W,h as t,a6 as X,a as z,r as U,w as e1,s as I,y as t1,Y as l1,ap as P,az as j,F as i1,C as o1,p as K,j as a1,aA as h,aB as n1}from"./vendor-DwjfiTos.js";import{v as s1,_ as d1,u as H,C as r1,r as u1}from"./index-08v4467x.js";import{d as c1}from"./dragBox-OpJUmZcL.js";const p1={class:"wiki-item"},f1={class:"wiki-item__header"},L1={class:"wiki-item-wrapper"},h1={class:"wiki-item-title"},g1={class:"wiki-item-time"},C1={class:"wiki-item-status"},m1={class:"wiki-item__content"},_1={class:"wiki-item-desc"},w1={class:"wiki-item__action"},y1={class:"wiki-item-git"},k1=["href"],v1={class:"wiki-item-action-item"},x1=R({__name:"wiki-item",props:{detail:{default:()=>({})},editable:{type:Boolean,default:!1}},emits:["update","delete"],setup(A,{emit:F}){const _=A,V=F,a=N(()=>{const{type:r,owner:n,repo:y,branch:g}=_.detail.config;switch(r){case"gitee":return`https://gitee.com/${n}/${y}/tree/${g}/`;case"github":return`https://github.com/${n}/${y}/tree/${g}/`}});function w(r){V(r)}function M(r){let n=0;for(let C=0;C<r.length;C++)n=r.charCodeAt(C)+((n<<5)-n);const y=(n&16711680)>>16,g=(n&65280)>>8,k=n&255;return`rgb(${y}, ${g}, ${k})`}const i=N(()=>{let r=_.detail.title;return/^[\u4e00-\u9fa5]+$/.test(r)?(r.length,r.substring(0,1)):r.charAt(0).toUpperCase()});return(r,n)=>{const y=u("el-tag"),g=u("More"),k=u("el-icon"),C=u("el-dropdown-item"),B=u("el-dropdown-menu"),D=u("el-dropdown");return L(),O("div",p1,[r.editable?(L(),b(c1,{key:0})):T("",!0),o("div",f1,[o("div",{class:"wiki-item-cover",style:Q({background:M(r.detail.title)})},G(i.value),5),o("div",L1,[o("div",h1,G(r.detail.title),1),o("div",g1,"更新于 "+G(q(s1)(r.detail.updatedAt)),1)]),o("div",C1,[r.detail.status?(L(),b(y,{key:0,effect:"dark",type:"success",size:"small"},{default:l(()=>[m("开放")]),_:1})):(L(),b(y,{key:1,effect:"dark",type:"info",size:"small"},{default:l(()=>[m("私有")]),_:1}))])]),o("div",m1,[o("div",_1,G(r.detail.description),1)]),o("div",w1,[o("div",y1,[o("a",{href:a.value,target:"_blank",onClick:n[0]||(n[0]=W(()=>{},["stop"]))},"Git仓库",8,k1)]),o("div",{class:"wiki-item-action",onClick:n[5]||(n[5]=W(()=>{},["stop"]))},[t(D,null,{dropdown:l(()=>[t(B,null,{default:l(()=>[t(C,{icon:"Edit",onClick:n[1]||(n[1]=s=>w("update"))},{default:l(()=>[m("编辑")]),_:1}),t(C,{icon:"Notification",onClick:n[2]||(n[2]=s=>w("copy"))},{default:l(()=>[m("复制")]),_:1}),t(C,{icon:"DeleteFilled",onClick:n[3]||(n[3]=s=>w("delete"))},{default:l(()=>[m("删除")]),_:1}),t(C,{icon:"Download",onClick:n[4]||(n[4]=s=>w("download"))},{default:l(()=>[m("导出")]),_:1})]),_:1})]),default:l(()=>[o("div",v1,[t(k,null,{default:l(()=>[t(g)]),_:1})])]),_:1})])])])}}}),b1={},F1={width:"274px",height:"205px",viewBox:"0 0 274 205",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},M1=X('<title>新建空间</title><defs><rect id="path-1" x="0" y="0" width="274" height="205"></rect><filter x="-13.7%" y="-18.3%" width="127.4%" height="136.6%" filterUnits="objectBoundingBox" id="filter-3"><feMorphology radius="2.5" operator="erode" in="SourceAlpha" result="shadowSpreadOuter1"></feMorphology><feOffset dx="0" dy="0" in="shadowSpreadOuter1" result="shadowOffsetOuter1"></feOffset><feGaussianBlur stdDeviation="15" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur><feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.12 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix></filter><rect id="path-4" x="0" y="0" width="274" height="29"></rect><filter x="-3.6%" y="-27.6%" width="107.3%" height="169.0%" filterUnits="objectBoundingBox" id="filter-5"><feOffset dx="0" dy="2" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset><feGaussianBlur stdDeviation="3" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur><feColorMatrix values="0 0 0 0 0.192156863   0 0 0 0 0.274509804   0 0 0 0 0.349019608  0 0 0 0.06 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix></filter><linearGradient x1="100%" y1="50%" x2="-2.22044605e-14%" y2="50%" id="linearGradient-6"><stop stop-color="#FFFFFF" offset="0%"></stop><stop stop-color="#F6F6F6" offset="100%"></stop></linearGradient><linearGradient x1="100%" y1="50%" x2="0%" y2="50%" id="linearGradient-7"><stop stop-color="#FBFBFB" offset="0%"></stop><stop stop-color="#F6F6F6" offset="100%"></stop></linearGradient><polygon id="path-8" points="0 0 4.99985714 0 4.99985714 4.642 0 4.642"></polygon><linearGradient x1="-1.11022302e-14%" y1="50%" x2="100%" y2="50%" id="linearGradient-10"><stop stop-color="#F3F3F3" offset="0%"></stop><stop stop-color="#FAFAFA" offset="100%"></stop></linearGradient></defs><g id="新建空间" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="编组"><g id="矩形"><mask id="mask-2" fill="white"><use xlink:href="#path-1"></use></mask><g id="蒙版"><use fill="black" fill-opacity="1" filter="url(#filter-3)" xlink:href="#path-1"></use><use fill="#FFFFFF" fill-rule="evenodd" xlink:href="#path-1"></use></g><g mask="url(#mask-2)" transform="translate(137.000000, 14.500000) scale(1, -1) rotate(-180.000000) translate(-137.000000, -14.500000) "><use fill="black" fill-opacity="1" filter="url(#filter-5)" xlink:href="#path-4"></use><use fill="#FFFFFF" fill-rule="evenodd" xlink:href="#path-4"></use></g></g><rect id="矩形" fill="#FE6158" x="14" y="10" width="8" height="8" rx="4"></rect><rect id="矩形-copy-4" fill="#29CC40" x="44" y="10" width="8" height="8" rx="4"></rect><rect id="矩形-copy-4" fill="#FFC431" x="29" y="10" width="8" height="8" rx="4"></rect><rect id="矩形-copy-27" fill="#F3F3F3" x="231" y="10" width="30" height="8" rx="4"></rect><rect id="矩形-copy-22" fill="#F3F3F3" x="0" y="28" width="274" height="1"></rect><rect id="矩形" fill="#FFFFFF" x="19" y="50" width="236" height="155"></rect><rect id="矩形-copy-31" fill="#EEEEEE" x="33" y="82" width="83.6619718" height="5" rx="2.5"></rect><rect id="矩形-copy-46" fill="url(#linearGradient-6)" x="33" y="112" width="196.605634" height="5" rx="2.5"></rect><rect id="矩形-copy-46" fill="#348FE4" opacity="0.089936756" x="33" y="177" width="54.6056338" height="5" rx="2.5"></rect><rect id="矩形-copy-47" fill="url(#linearGradient-7)" x="57" y="128" width="156.169014" height="5" rx="2.5"></rect><rect id="矩形-copy-48" fill="#F3F3F3" x="33" y="143" width="117.197183" height="5" rx="2.5"></rect><path d="M41,122 C45.418278,122 49,125.581722 49,130 C49,134.418278 45.418278,138 41,138 C36.581722,138 33,134.418278 33,130 C33,125.581722 36.581722,122 41,122 Z M41.6,126 L40.4,126 L40.399,129.4 L37,129.4 L37,130.6 L40.4,130.6 L40.4,134 L41.6,134 L41.6,130.6 L45,130.6 L45,129.4 L41.6,129.4 L41.6,126 Z" id="形状结合" fill="#6698FF"></path><rect id="矩形-copy-49" fill="#F3F3F3" opacity="0.400000006" x="33" y="160" width="87" height="5" rx="2.5"></rect><rect id="矩形-copy-50" fill="#EEEEEE" x="33" y="97" width="131.070423" height="5" rx="2.5"></rect><rect id="矩形-copy-51" fill="#EEEEEE" x="132" y="82" width="85.056338" height="5" rx="2.5"></rect><g id="编组-2" transform="translate(14.000000, 36.000000)"><path d="M88.1358737,1.00003576 C88.7188397,1.00003576 89.1929806,1.54720692 89.1929806,2.22026321 C89.1929806,2.53178283 89.0794272,2.82497365 88.8991629,3.04581433 C89.5279504,3.13181565 90,3.73647061 90,4.4928832 C90,5.26199422 89.4730624,5.91832737 88.8238169,5.99288175 L88.7007488,5.99992847 L86.2156204,5.99992847 L86.215,5.998 L86.2100982,6 C86.0946468,6 86,5.88484372 86,5.74358057 L86,1.25641943 C86,1.11515628 86.0946468,1 86.2100982,1 L86.218,1.001 L86.2186647,1.00003576 L88.1358737,1.00003576 Z M88.7409896,3.46255633 L86.419,3.462 L86.419,5.571 L88.7007488,5.57113225 C89.1692911,5.57113225 89.5804465,5.0672341 89.5804465,4.4928832 C89.5804465,3.91495601 89.2116313,3.46255633 88.7409896,3.46255633 Z M88.1358737,1.42918961 L86.419,1.429 L86.419,3.01 L88.1358737,3.01097919 C88.4633984,3.01097919 88.7730772,2.62652886 88.7730772,2.22026321 C88.7730772,1.79146699 88.4812443,1.42918961 88.1358737,1.42918961 Z" id="合并形状" fill="#666666"></path><text id="正文" font-family="PingFangSC-Regular, PingFang SC" font-size="4.9" font-weight="normal" fill="#333333"><tspan x="60" y="5">正文</tspan></text><rect id="矩形" fill="#DDDDDD" x="144" y="1" width="1" height="5"></rect><rect id="矩形" fill="#DDDDDD" x="166" y="1" width="1" height="5"></rect><rect id="矩形" fill="#DDDDDD" x="206" y="1" width="1" height="5"></rect><rect id="矩形备份-2" fill="#DDDDDD" x="236" y="1" width="1" height="5"></rect><g id="1.icon图标/11.editor/-save备份-30" transform="translate(241.000000, 1.312500)" fill="#666666"><path d="M1.15625,0 C1.25980339,-4.67780249e-17 1.34375,0.0839466094 1.34375,0.1875 C1.34375,0.291053391 1.25980339,0.375 1.15625,0.375 L0.937,0.374 L0.937,0.375 L0.375,0.375 L0.374,2 L2,2 C2.10355339,2 2.1875,2.08394661 2.1875,2.1875 C2.1875,2.29105339 2.10355339,2.375 2,2.375 L0.374,2.375 L0.375,4 L2,4 C2.10355339,4 2.1875,4.08394661 2.1875,4.1875 C2.1875,4.29105339 2.10355339,4.375 2,4.375 L1.4375,4.375 L1.432,4.374 L0.3125,4.375 C0.139911016,4.375 0,4.23508898 0,4.0625 L0,0.3125 C0,0.139911016 0.139911016,1.24344979e-14 0.3125,1.24344979e-14 L1.15625,0 Z M4.8125,4 C4.91605339,4 5,4.08394661 5,4.1875 C5,4.29105339 4.91605339,4.375 4.8125,4.375 L2.90625,4.375 C2.80269661,4.375 2.71875,4.29105339 2.71875,4.1875 C2.71875,4.08394661 2.80269661,4 2.90625,4 L4.8125,4 Z M4.8125,2 C4.91605339,2 5,2.08394661 5,2.1875 C5,2.29105339 4.91605339,2.375 4.8125,2.375 L2.90625,2.375 C2.80269661,2.375 2.71875,2.29105339 2.71875,2.1875 C2.71875,2.08394661 2.80269661,2 2.90625,2 L4.8125,2 Z M4.8125,1.50990331e-14 C4.91605339,1.50800107e-14 5,0.0839466094 5,0.1875 C5,0.291053391 4.91605339,0.375 4.8125,0.375 L2.0625,0.375 C1.95894661,0.375 1.875,0.291053391 1.875,0.1875 C1.875,0.0839466094 1.95894661,1.51180556e-14 2.0625,1.50990331e-14 L4.8125,1.50990331e-14 Z" id="形状结合"></path></g><rect id="矩形" fill="#DDDDDD" x="55" y="1" width="1" height="5"></rect><rect id="矩形" fill="#DDDDDD" x="81" y="1" width="1" height="5"></rect><path d="M111,3.30215827 L111,3.80215827 L110.142551,3.80185711 C110.326596,4.03372665 110.436876,4.32924037 110.436876,4.65107914 C110.436876,5.39606756 109.845971,6 109.117054,6 L107.88522,6 C107.156302,6 106.565398,5.39606756 106.565398,4.65107914 L106.568398,4.59615827 L106.989293,4.59668281 C106.988263,4.61468045 106.987741,4.63281747 106.987741,4.65107914 C106.987741,5.15767126 107.389556,5.56834532 107.88522,5.56834532 L109.117054,5.56834532 C109.612718,5.56834532 110.014533,5.15767126 110.014533,4.65107914 C110.014533,4.26680856 109.783335,3.93772765 109.455352,3.80121217 L106,3.80215827 L106,3.30215827 L106.918291,3.30302588 C106.699316,3.06224276 106.565398,2.73955142 106.565398,2.38489209 L106.565398,2.34892086 C106.565398,1.60393244 107.156302,1 107.88522,1 L109.117054,1 C109.816057,1 110.388142,1.55537924 110.433922,2.25794334 L110.009398,2.258 L110.008495,2.24194825 C109.956652,1.78575629 109.577313,1.43165468 109.117054,1.43165468 L107.88522,1.43165468 C107.389556,1.43165468 106.987741,1.84232874 106.987741,2.34892086 L106.987741,2.38489209 C106.987741,2.89148421 107.389556,3.30215827 107.88522,3.30215827 L108.852398,3.302 L108.852,3.302 L111,3.30215827 Z" id="合并形状" fill="#666666" fill-rule="nonzero"></path><g id="文本编辑_倾斜-1.5px-16*16" transform="translate(95.181818, 1.000000)" fill="#666666"><path d="M3.81818182,0 L3.81818182,0.428571429 L2.725,0.428 L1.595,4.571 L2.72727273,4.57142857 L2.72727273,5 L0,5 L0,4.57142857 L1.143,4.571 L2.274,0.428 L1.09090909,0.428571429 L1.09090909,0 L3.81818182,0 Z" id="形状结合"></path></g><path d="M34.3333333,2.53013353 L37.6666667,2.53013353 L37.6666667,1.36088055 L34.3333333,1.36088055 L34.3333333,2.53013353 Z M37.7663333,1 L34.2336667,1 C34.1046667,1 34,1.11331649 34,1.25297726 L34,2.63803681 C34,2.77769758 34.1046667,2.89101407 34.2336667,2.89101407 L36.3123333,2.89101407 L35.8736667,3.32334897 L35.873,3.32334897 L35.873,4.12919524 L35.617,4.12919524 L35.617,6 L36.468,5.36665464 L36.468,4.12919524 L36.273,4.12919524 L36.273,3.51533742 L36.9063333,2.89101407 L37.7663333,2.89101407 C37.8953333,2.89101407 38,2.77769758 38,2.63803681 L38,1.25297726 C38,1.11331649 37.8953333,1 37.7663333,1 L37.7663333,1 Z" id="Fill-1" fill="#666666"></path><path d="M48.8076923,1 L51,3.12686567 L48.0380769,6 L46.3846154,6 L45,4.69402985 L48.8076923,1 Z M47.3195385,3.0794403 L45.6606923,4.68876866 L46.5610769,5.55220149 L47.8464615,5.55220149 L48.8576154,4.57123134 L47.3195385,3.0794403 Z" id="形状结合" fill="#666666"></path><path d="M2.5,1 C3.88071187,1 5,2.11928813 5,3.5 C5,4.88071187 3.88071187,6 2.5,6 C1.11928813,6 0,4.88071187 0,3.5 C0,2.11928813 1.11928813,1 2.5,1 Z M2.6875,2.25 L2.3125,2.25 L2.312,3.312 L1.25,3.3125 L1.25,3.6875 L2.312,3.687 L2.3125,4.75 L2.6875,4.75 L2.687,3.687 L3.75,3.6875 L3.75,3.3125 L2.687,3.312 L2.6875,2.25 Z" id="形状结合备份" fill="#6698FF"></path><path d="M24.21875,1 C25.4441319,1 26.4375,2.00735896 26.4375,3.24999951 L26.431,3.091 L27,3.09154884 L26.21875,4.13366113 L25.3329022,3.09154884 L26.0559895,3.09175465 C25.9767725,2.1331988 25.1844668,1.38028161 24.21875,1.38028161 C23.2004749,1.38028161 22.375,2.21738269 22.375,3.24999951 C22.375,4.28261544 23.200475,5.11971658 24.2189323,5.1197175 C24.3306164,5.11982762 24.4420322,5.10865307 24.5515288,5.08635929 L24.5515288,5.08635929 L24.6253462,5.45920042 C24.4914272,5.48646669 24.3551612,5.5001336 24.2187499,5.5 C22.9933681,5.5 22,4.49263912 22,3.24999951 C22,2.00735896 22.9933681,1 24.21875,1 Z" id="形状结合" fill="#666666" fill-rule="nonzero" transform="translate(24.500000, 3.250000) scale(-1, 1) translate(-24.500000, -3.250000) "></path><path d="M13.21875,1 C14.4441319,1 15.4375,2.00735896 15.4375,3.24999951 L15.431,3.091 L16,3.09154884 L15.21875,4.13366113 L14.3329022,3.09154884 L15.0559895,3.09175465 C14.9767725,2.1331988 14.1844668,1.38028161 13.21875,1.38028161 C12.2004749,1.38028161 11.375,2.21738269 11.375,3.24999951 C11.375,4.28261544 12.200475,5.11971658 13.2189323,5.1197175 C13.3306164,5.11982762 13.4420322,5.10865307 13.5515288,5.08635929 L13.5515288,5.08635929 L13.6253462,5.45920042 C13.4914272,5.48646669 13.3551612,5.5001336 13.2187499,5.5 C11.9933681,5.5 11,4.49263912 11,3.24999951 C11,2.00735896 11.9933681,1 13.21875,1 Z" id="形状结合-copy-2" fill="#666666" fill-rule="nonzero"></path><polygon id="路径" fill="#AAAAAA" fill-rule="nonzero" transform="translate(75.414214, 3.414214) rotate(-315.000000) translate(-75.414214, -3.414214) " points="74.4142136 4.41421356 76.4142136 2.41421356 76.4142136 4.41421356"></polygon><polygon id="路径" fill="#AAAAAA" fill-rule="nonzero" transform="translate(127.414214, 3.414214) rotate(-315.000000) translate(-127.414214, -3.414214) " points="126.414214 4.41421356 128.414214 2.41421356 128.414214 4.41421356"></polygon><polygon id="路径" fill="#AAAAAA" fill-rule="nonzero" transform="translate(160.414214, 3.414214) rotate(-315.000000) translate(-160.414214, -3.414214) " points="159.414214 4.41421356 161.414214 2.41421356 161.414214 4.41421356"></polygon><polygon id="路径备份" fill="#AAAAAA" fill-rule="nonzero" transform="translate(230.414214, 3.414214) rotate(-315.000000) translate(-230.414214, -3.414214) " points="229.414214 4.41421356 231.414214 2.41421356 231.414214 4.41421356"></polygon><g id="分组" transform="translate(117.000000, 1.330200)"><polygon id="Fill-1" fill="#FF0000" points="0 4.6698 3.999 4.6698 3.999 4.17013333 0 4.17013333"></polygon><path d="M1.31186667,2.09466667 L2.0052,0.467 L2.69853333,2.09466667 L1.31186667,2.09466667 Z M3.4502,3.859 L3.8842,3.85633333 L2.2412,0 L1.76953333,0 L0.1262,3.85733333 L0.5602,3.859 L1.14153333,2.49466667 L2.8692,2.49466667 L3.4502,3.859 Z" id="Fill-2" fill="#666666"></path></g><path d="M135.367839,3.49129565 L136.471809,1.6074524 L138.383927,2.69494037 L137.279582,4.57915401 L135.367839,3.49129565 Z M139,2.53233573 L136.306796,1 L134.751767,3.65390029 L135.538115,4.10134084 L134.85739,5.26327876 L136.699594,5.26735314 L136.921365,4.88843618 L137.444971,5.18623602 L139,2.53233573 Z" id="合并形状" fill="#666666"></path><polygon id="Fill-1" fill="#F6C659" points="134 6 138.509472 6 138.509472 5.44477369 134 5.44477369"></polygon><path d="M184.375,1.35714286 L184.375,2.17857143 L184.75,2.17857143 L184.75,1 L184.458333,1 L184,1.25 L184.166667,1.5 L184.375,1.35714286 Z M184.041667,3.10714286 L184.291667,3.28571429 C184.333333,3.21428571 184.416667,3.17857143 184.458333,3.17857143 C184.5,3.17857143 184.5,3.17857143 184.541667,3.21428571 C184.583333,3.25 184.583333,3.25 184.583333,3.28571429 C184.583333,3.32142857 184.583333,3.35714286 184.541667,3.39285714 C184.5,3.42857143 184.458333,3.46428571 184.416667,3.53571429 L184.041667,3.89285714 L184.041667,4.10714286 L184.958333,4.10714286 L184.958333,3.82142857 L184.541667,3.82142857 L184.708333,3.67857143 C184.833333,3.57142857 184.916667,3.5 184.916667,3.42857143 C184.958333,3.35714286 184.958333,3.32142857 184.958333,3.25 C184.958333,3.14285714 184.916667,3.07142857 184.833333,3 C184.75,2.92857143 184.625,2.89285714 184.5,2.89285714 C184.291667,2.89285714 184.125,2.96428571 184.041667,3.10714286 Z M184.791667,5.39285714 C184.916667,5.32142857 184.958333,5.25 184.958333,5.10714286 C184.958333,5 184.916667,4.92857143 184.833333,4.85714286 C184.75,4.78571429 184.625,4.78571429 184.5,4.78571429 C184.416667,4.78571429 184.291667,4.82142857 184.208333,4.85714286 C184.125,4.89285714 184.083333,4.96428571 184.041667,5.03571429 L184.333333,5.17857143 C184.375,5.10714286 184.416667,5.07142857 184.5,5.07142857 C184.541667,5.07142857 184.583333,5.07142857 184.583333,5.10714286 C184.625,5.10714286 184.625,5.14285714 184.625,5.17857143 C184.625,5.21428571 184.625,5.21428571 184.583333,5.25 C184.541667,5.25 184.541667,5.28571429 184.5,5.28571429 L184.375,5.28571429 L184.375,5.53571429 L184.458333,5.53571429 C184.5,5.53571429 184.541667,5.53571429 184.583333,5.57142857 C184.625,5.60714286 184.625,5.60714286 184.625,5.64285714 C184.625,5.67857143 184.625,5.71428571 184.583333,5.71428571 C184.541667,5.75 184.541667,5.75 184.5,5.75 C184.416667,5.75 184.375,5.71428571 184.333333,5.64285714 L184,5.71428571 C184.041667,5.78571429 184.083333,5.85714286 184.208333,5.92857143 C184.291667,5.96428571 184.416667,6 184.541667,6 C184.666667,6 184.791667,5.96428571 184.875,5.89285714 C184.958333,5.82142857 185,5.75 185,5.64285714 C185,5.53571429 184.916667,5.42857143 184.791667,5.39285714 Z M185.865137,1.64285714 L189.76,1.64285714 C189.892548,1.64285714 190,1.54691816 190,1.42857143 C190,1.3102247 189.892548,1.21428571 189.76,1.21428571 L185.865137,1.21428571 C185.732588,1.21428571 185.625137,1.3102247 185.625137,1.42857143 C185.625137,1.54691816 185.732588,1.64285714 185.865137,1.64285714 Z M185.865137,5.78571429 L189.76,5.78571429 C189.892548,5.78571429 190,5.6897753 190,5.57142857 C190,5.45308184 189.892548,5.35714286 189.76,5.35714286 L185.865137,5.35714286 C185.732588,5.35714286 185.625137,5.45308184 185.625137,5.57142857 C185.625137,5.6897753 185.732588,5.78571429 185.865137,5.78571429 Z M185.865137,3.57142857 L189.76,3.57142857 C189.892548,3.57142857 190,3.47548959 190,3.35714286 C190,3.23879613 189.892548,3.14285714 189.76,3.14285714 L185.865137,3.14285714 C185.732588,3.14285714 185.625137,3.23879613 185.625137,3.35714286 C185.625137,3.47548959 185.732588,3.57142857 185.865137,3.57142857 Z" id="合并形状" fill="#666666" fill-rule="nonzero"></path><g id="分组-3" transform="translate(170.843146, 1.000000)" fill="#666666" fill-rule="nonzero"><path d="M0.225907961,0.5 L0.883482503,0.5 C1.00824802,0.5 1.10939046,0.388071187 1.10939046,0.25 C1.10939046,0.111928813 1.00824802,0 0.883482503,0 L0.225907961,0 C0.101142439,0 0,0.111928813 0,0.25 C0,0.388071187 0.101142439,0.5 0.225907961,0.5 Z" id="路径"></path><path d="M2.22590796,0.5 L5.89207723,0.5 C6.01684275,0.5 6.11798519,0.388071187 6.11798519,0.25 C6.11798519,0.111928813 6.01684275,0 5.89207723,0 L2.22590796,0 C2.10114244,0 2,0.111928813 2,0.25 C2,0.388071187 2.10114244,0.5 2.22590796,0.5 Z" id="路径"></path><path d="M0.225907961,2.5 L0.883482503,2.5 C1.00824802,2.5 1.10939046,2.38807119 1.10939046,2.25 C1.10939046,2.11192881 1.00824802,2 0.883482503,2 L0.225907961,2 C0.101142439,2 0,2.11192881 0,2.25 C0,2.38807119 0.101142439,2.5 0.225907961,2.5 Z" id="路径"></path><path d="M2.22590796,2.5 L5.89207723,2.5 C6.01684275,2.5 6.11798519,2.38807119 6.11798519,2.25 C6.11798519,2.11192881 6.01684275,2 5.89207723,2 L2.22590796,2 C2.10114244,2 2,2.11192881 2,2.25 C2,2.38807119 2.10114244,2.5 2.22590796,2.5 Z" id="路径"></path><path d="M0.225907961,4.5 L0.883482503,4.5 C1.00824802,4.5 1.10939046,4.38807119 1.10939046,4.25 C1.10939046,4.11192881 1.00824802,4 0.883482503,4 L0.225907961,4 C0.101142439,4 0,4.11192881 0,4.25 C0,4.38807119 0.101142439,4.5 0.225907961,4.5 Z" id="路径"></path><path d="M2.22590796,4.5 L5.89207723,4.5 C6.01684275,4.5 6.11798519,4.38807119 6.11798519,4.25 C6.11798519,4.11192881 6.01684275,4 5.89207723,4 L2.22590796,4 C2.10114244,4 2,4.11192881 2,4.25 C2,4.38807119 2.10114244,4.5 2.22590796,4.5 Z" id="路径"></path></g><path d="M148,2 L151,2 L151,2.4 L148,2.4 L148,2 Z M148,3.8 L154,3.8 L154,4.2 L148,4.2 L148,3.8 Z M148,5.6 L152.875,5.6 L152.875,6 L148,6 L148,5.6 Z" id="形状结合" fill="#666666"></path><g id="分组" transform="translate(211.000000, 1.333400)"><path d="M3.39139286,2 C3.68532143,2 3.92603571,1.775 3.92603571,1.5 C3.92603571,1.225 3.68532143,1 3.39139286,1 C3.09710714,1 2.85639286,1.225 2.85639286,1.5 C2.82996429,1.775 3.09710714,2 3.39139286,2" id="Fill-1" fill="#606060"></path><g><mask id="mask-9" fill="white"><use xlink:href="#path-8"></use></mask><g id="Clip-4"></g><path d="M4.57128571,2.82533333 L4.48735714,2.841 C3.78557143,2.972 3.35735714,2.84166667 2.77378571,2.43833333 C2.72235714,2.403 2.54914286,2.28033333 2.52735714,2.26533333 C2.42521429,2.194 2.34557143,2.141 2.26485714,2.09266667 C1.98271429,1.92333333 1.72235714,1.83333333 1.42842857,1.83333333 C1.08164286,1.83333333 0.761285714,1.968 0.464142857,2.18466667 C0.452,2.19333333 0.440214286,2.202 0.428428571,2.21066667 L0.428428571,0.4 L4.57128571,0.4 L4.57128571,2.82533333 Z M4.57128571,3.333 L4.57128571,3.9 L4.57128571,3.933 L4.57128571,4.29966667 L0.428428571,4.29966667 L0.428428571,3.933 L0.428428571,3.9 L0.428428571,3.333 L0.428428571,2.76666667 C0.428428571,2.76666667 0.892714286,2.23333333 1.42842857,2.23333333 C2.32128571,2.23333333 2.78557143,3.56666667 4.57128571,3.23333333 L4.57128571,3.333 Z M4.64271429,0 L0.357,0 C0.143071429,0 -0.000142857143,0.178666667 -0.000142857143,0.357 L-0.000142857143,4.285 C-0.000142857143,4.499 0.143071429,4.642 0.357,4.642 L4.64271429,4.642 C4.85735714,4.642 4.99985714,4.499 4.99985714,4.285 L4.99985714,0.357 C4.99985714,0.178666667 4.85735714,0 4.64271429,0 L4.64271429,0 Z" id="Fill-3" fill="#606060" mask="url(#mask-9)"></path></g></g><path d="M222.357143,1 L226.642857,1 C226.840102,1 227,1.1598983 227,1.35714286 L227,5.64285714 C227,5.8401017 226.840102,6 226.642857,6 L222.357143,6 C222.159898,6 222,5.8401017 222,5.64285714 L222,1.35714286 C222,1.1598983 222.159898,1 222.357143,1 Z M222.428571,1.42857143 L222.428571,5.57142857 L226.571429,5.57142857 L226.571429,1.42857143 L222.428571,1.42857143 Z" id="矩形" fill="#666666" fill-rule="nonzero"></path><polygon id="路径" fill="#666666" fill-rule="nonzero" points="224.215062 1.26284671 224.215062 5.548561 224.715062 5.548561 224.715062 1.26284671"></polygon><polygon id="路径" fill="#666666" fill-rule="nonzero" points="226.642857 3.29708697 222 3.29708697 222 3.79708697 226.642857 3.79708697"></polygon><path d="M196.554035,1.55888829 L196.330075,1.35468398 L196,1.65564331 L196.554035,2.16080696 L197.497068,1.30095934 L197.166992,1 L196.554035,1.55888829 Z M196.554035,3.48278785 L196.330075,3.27858354 L196,3.57954287 L196.554035,4.08470652 L197.497068,3.22485889 L197.166992,2.92389956 L196.554035,3.48278785 Z M196.554035,5.39808133 L196.330075,5.19387702 L196,5.49483635 L196.554035,6 L197.497068,5.14015238 L197.166992,4.83919304 L196.554035,5.39808133 Z M197.978871,1.57610044 L201.766602,1.57610044 C201.895504,1.57610044 202,1.48082199 202,1.36329005 C202,1.24575812 201.895504,1.15047967 201.766602,1.15047967 L197.978871,1.15047967 C197.849969,1.15047967 197.745473,1.24575812 197.745473,1.36329005 C197.745473,1.48082199 197.849969,1.57610044 197.978871,1.57610044 Z M197.978871,5.76137138 L201.766602,5.76137138 C201.895504,5.76137138 202,5.66609293 202,5.548561 C202,5.43102907 201.895504,5.33575061 201.766602,5.33575061 L197.978871,5.33575061 C197.849969,5.33575061 197.745473,5.43102907 197.745473,5.548561 C197.745473,5.66609293 197.849969,5.76137138 197.978871,5.76137138 Z M197.978871,3.56233072 L201.766602,3.56233072 C201.895504,3.56233072 202,3.46705226 202,3.34952033 C202,3.2319884 201.895504,3.13670995 201.766602,3.13670995 L197.978871,3.13670995 C197.849969,3.13670995 197.745473,3.2319884 197.745473,3.34952033 C197.745473,3.46705226 197.849969,3.56233072 197.978871,3.56233072 Z" id="合并形状" fill="#666666" fill-rule="nonzero"></path></g><rect id="矩形-copy-52" fill="url(#linearGradient-10)" x="178" y="97" width="52.9859155" height="5" rx="2.5"></rect><text id="知识库" font-family="PingFangSC-Semibold, PingFang SC" font-size="10" font-weight="500" fill="#333333"><tspan x="33" y="69">知识库</tspan></text></g></g>',3),V1=[M1];function D1(A,F){return L(),O("svg",F1,V1)}const Z1=d1(b1,[["render",D1]]),$1={class:"wiki-inline-item"},z1={class:"wiki-inline-content"},A1=o("div",{class:"wiki-inline-name"},"知识库",-1),B1=o("div",{class:"wiki-inline-desc"},"整合、组织和存储海量信息，实现高效的知识管理和检索，帮助用户轻松获取所需知识并提升工作效率。",-1),E1={class:"title"},G1=o("p",{class:"desc"},"组织全部成员可见，仅空间成员可编辑",-1),U1={class:"title"},O1=o("p",{class:"desc"},"仅空间成员可见及编辑",-1),S1={class:"wiki-inline-img"},q1=o("div",{class:"wiki-inline-divider"},null,-1),N1={class:"wiki-inline-item"},T1={class:"wiki-inline-content"},R1=o("div",{class:"wiki-inline-name"},"关联仓库",-1),W1=o("div",{class:"wiki-inline-desc"},"考虑到方便知识库的文章作版本控制，故将文章内容保存在git远程仓库，通过RestApi访问。",-1),I1=R({__name:"EditWiki",props:{modelValue:{type:Boolean,default:!1},detail:{default:()=>({})}},emits:["update:modelValue","submit"],setup(A,{emit:F}){const _=A,V=F,a=new Y,w=H(),M=N({get(){return _.modelValue},set(s){V("update:modelValue",s)}}),i=z({title:"",status:!1,description:"",config:{type:"gitee",owner:"",repo:"",branch:"master",baseurl:"/",access_token:""}}),r=z({title:[{required:!0,message:"请输入知识库名称",trigger:["blur","change"]}],status:[{required:!0,message:"请选择知识库可见范围",trigger:["blur","change"]}],"config.owner":[{required:!0,message:"请输入关联仓库用户名",trigger:["blur","change"]}],"config.repo":[{required:!0,message:"请输入关联仓库名",trigger:["blur","change"]}],"config.branch":[{required:!0,message:"请输入关联仓库分支",trigger:["blur","change"]}],"config.baseurl":[{required:!0,message:"请输入关联仓库存储地址",trigger:["blur","change"]}],"config.access_token":[{required:!0,message:"请输入关联仓库私人令牌token",trigger:["blur","change"]}]}),n=U(null),y=z({submit:!1}),g=()=>{M.value=!1};function k(){n.value.validate(s=>{s&&(_.detail&&_.detail.id?C():B())})}function C(){a.update({id:_.detail.id,...i}).then(s=>{D("更新成功")})}function B(){a.create(i).then(s=>{D("创建成功")})}function D(s){w.$message({message:s,duration:1e3,type:"success"}),g(),V("submit")}return e1(()=>_.detail,s=>{s&&Object.keys(i).forEach(e=>{i[e]=_.detail[e]})},{immediate:!0}),(s,e)=>{const d=u("el-input"),p=u("el-form-item"),v=u("Unlock"),x=u("el-icon"),Z=u("el-option"),$=u("Lock"),f=u("el-select"),S=u("el-button"),E=u("el-form"),J=u("com-dialog");return L(),b(J,{modelValue:M.value,"onUpdate:modelValue":e[9]||(e[9]=c=>M.value=c),title:s.detail&&s.detail.id?"编辑知识库":"新建知识库",width:"800px",class:"wiki-dialog","before-close":g},{default:l(()=>[t(E,{class:"wiki-inline wiki-form","label-position":"top",model:i,rules:r,ref_key:"formRef",ref:n},{default:l(()=>[o("div",$1,[o("div",z1,[A1,B1,t(p,{label:"知识库名称",prop:"title"},{default:l(()=>[t(d,{modelValue:i.title,"onUpdate:modelValue":e[0]||(e[0]=c=>i.title=c),placeholder:"输入知识库名称",size:"large"},null,8,["modelValue"])]),_:1}),t(p,{label:"可见范围",prop:"status"},{default:l(()=>[t(f,{modelValue:i.status,"onUpdate:modelValue":e[1]||(e[1]=c=>i.status=c),style:{width:"100%"},size:"large",placeholder:"请选择可见范围","popper-class":"wiki-status-popper"},{default:l(()=>[t(Z,{value:!0,label:"公开"},{default:l(()=>[o("p",E1,[t(x,null,{default:l(()=>[t(v)]),_:1}),m("公开")]),G1]),_:1}),t(Z,{value:!1,label:"私有"},{default:l(()=>[o("p",U1,[t(x,null,{default:l(()=>[t($)]),_:1}),m("私有")]),O1]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(p,{label:"知识库介绍",prop:"description"},{default:l(()=>[t(d,{type:"textarea",rows:"3",placeholder:"输入知识库描述",modelValue:i.description,"onUpdate:modelValue":e[2]||(e[2]=c=>i.description=c),size:"large"},null,8,["modelValue"])]),_:1})]),o("div",S1,[t(Z1)])]),q1,o("div",N1,[o("div",T1,[R1,W1,t(p,{label:"仓库类型",prop:"config.type"},{default:l(()=>[t(f,{style:{width:"100%"},size:"large",modelValue:i.config.type,"onUpdate:modelValue":e[3]||(e[3]=c=>i.config.type=c),disabled:!!(s.detail&&s.detail.id)},{default:l(()=>[t(Z,{label:"Gitee",value:"gitee"})]),_:1},8,["modelValue","disabled"])]),_:1}),t(p,{label:"Git用户名",prop:"config.owner"},{default:l(()=>[t(d,{modelValue:i.config.owner,"onUpdate:modelValue":e[4]||(e[4]=c=>i.config.owner=c),placeholder:"输入Git用户名",size:"large",disabled:!!(s.detail&&s.detail.id)},null,8,["modelValue","disabled"])]),_:1}),t(p,{label:"Git仓库名",prop:"config.repo"},{default:l(()=>[t(d,{modelValue:i.config.repo,"onUpdate:modelValue":e[5]||(e[5]=c=>i.config.repo=c),placeholder:"输入Git仓库名",size:"large",disabled:!!(s.detail&&s.detail.id)},null,8,["modelValue","disabled"])]),_:1}),t(p,{label:"Git仓库分支",prop:"config.branch"},{default:l(()=>[t(d,{modelValue:i.config.branch,"onUpdate:modelValue":e[6]||(e[6]=c=>i.config.branch=c),placeholder:"输入Git仓库分支",size:"large",disabled:!!(s.detail&&s.detail.id)},null,8,["modelValue","disabled"])]),_:1}),t(p,{label:"Git仓库基地址",prop:"config.baseurl"},{default:l(()=>[t(d,{modelValue:i.config.baseurl,"onUpdate:modelValue":e[7]||(e[7]=c=>i.config.baseurl=c),placeholder:"输入Git仓库基地址",size:"large",disabled:!!(s.detail&&s.detail.id)},null,8,["modelValue","disabled"])]),_:1}),t(p,{label:"Git访问token",prop:"config.access_token"},{default:l(()=>[t(d,{modelValue:i.config.access_token,"onUpdate:modelValue":e[8]||(e[8]=c=>i.config.access_token=c),"show-password":"",placeholder:"输入Git的access_token",size:"large"},null,8,["modelValue"])]),_:1}),t(p,{class:"last-form-item"},{default:l(()=>[t(S,{onClick:g},{default:l(()=>[m("取 消")]),_:1}),t(S,{type:"primary",loading:y.submit,onClick:k},{default:l(()=>[m("确 定")]),_:1},8,["loading"])]),_:1})])])]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}}),P1={class:"wiki-conatiner"},j1={class:"wiki-filter"},K1=o("div",null,null,-1),Y1={class:"wiki-list"},H1={class:"wiki-pagination"},t3=R({__name:"index",setup(A){const F=new Y,_=l1(),V=H(),a=z({page:1,size:18,total:0,loading:!1,filters:{search:""},data:[]}),w=z({edit:!1}),M=z({data:null});function i(){a.loading=!0,F.find({page:a.page,size:a.size,...a.filters}).then(e=>{a.data=e.items,a.total=e.total,a.loading=!1})}i();function r(e){w.edit=!0,M.data=e}function n(e){const d=U(!1),p=U(!1),v=U("");K({title:"提示",showCancelButton:!1,showConfirmButton:!0,message:()=>h("div",null,[h("p",null,[h("span",null,"你正在删除“"),h("b",{style:"color: red;"},e.title),h("span",null,"”知识库，删除操作无法撤消，并将删除该知识库上的所有内容。")]),h("div",null,[h(n1,{modelValue:d.value,"onUpdate:modelValue":x=>{d.value=x}},"我已知晓，并继续删除本知识库")]),d.value&&h("div",{style:"margin-top: 10px;font-weight: bold;"},[h("p",null,[h("span",null,"请输入“"),h("span",{style:"color: red;"},e.title),h("span",null,"”确认删除")]),h(P,{modelValue:v.value,placeholder:"请输入知识库名称",style:"margin-top: 8px;","onUpdate:modelValue":x=>{v.value=x,p.value=v.value===e.title}}),!p.value&&v.value&&h("p",{style:"color: red;"},"请填写正确的名称")])]),beforeClose:(x,Z,$)=>{x==="confirm"&&p.value&&$()}}).then(()=>{F.delete(e.id).then(()=>{V.$message({message:"删除成功",type:"success",duration:1e3}),i()})}).catch(()=>{})}function y(e){K.prompt("请输入新知识库名","复制知识库",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/(.)+/,inputErrorMessage:"请输入知识库名称",inputValue:e.title+"(1)"}).then(({value:d})=>{F.copy(e.id,d).then(()=>{V.$message({message:"复制成功",type:"success",duration:1e3}),i()})}).catch(()=>{})}function g(e){_.push({name:"WikiArticle",params:{wid:e.id}})}const k=U(!1);function C(){k.value=!k.value,B()}function B(){a1(()=>{u1(document.querySelector("#sortableRef"),a.data,D)})}function D(e,d){a.loading=!0;const[p,v]=[a.data[e],a.data[d]];F.sort(p.id,v.id).then(()=>{i()})}function s(e){setTimeout(()=>{i()},1e3)}return(e,d)=>{const p=u("el-col"),v=u("el-row"),x=u("pagination"),Z=u("c-card"),$=t1("loading");return L(),O("div",P1,[I((L(),b(Z,{title:`知识库(${a.total})`},{cardAction:l(()=>[t(q(P),{modelValue:a.filters.search,"onUpdate:modelValue":d[0]||(d[0]=f=>a.filters.search=f),placeholder:"请输入搜索内容...",style:{width:"180px"},"suffix-icon":"Search",clearable:"",onInput:s},null,8,["modelValue"])]),default:l(()=>[o("div",j1,[K1,o("div",null,[t(q(j),{"el-button":"",type:"primary",onClick:d[1]||(d[1]=f=>r(null))},{default:l(()=>[m("新增")]),_:1}),a.data.length?(L(),b(q(j),{key:0,onClick:C},{default:l(()=>[m(G(k.value?"完成排序":"启用排序"),1)]),_:1})):T("",!0)])]),I((L(),O("div",Y1,[a.data.length===0?(L(),b(r1,{key:0})):(L(),b(v,{key:1,id:"sortableRef"},{default:l(()=>[(L(!0),O(i1,null,o1(a.data,(f,S)=>(L(),b(p,{xl:6,lg:8,md:12,key:"wiki-item-"+S,class:"drag-box-col"},{default:l(()=>[t(x1,{detail:f,editable:k.value,onUpdate:E=>r(f),onDelete:E=>n(f),onCopy:E=>y(f),onClick:E=>g(f)},null,8,["detail","editable","onUpdate","onDelete","onCopy","onClick"])]),_:2},1024))),128))]),_:1}))])),[[$,a.loading]]),o("div",H1,[t(x,{page:a.page,"onUpdate:page":d[2]||(d[2]=f=>a.page=f),size:a.size,"onUpdate:size":d[3]||(d[3]=f=>a.size=f),total:a.total,"page-sizes":[18,36,72,100],onChange:i},null,8,["page","size","total"])])]),_:1},8,["title"])),[[$,a.loading]]),w.edit?(L(),b(I1,{key:0,modelValue:w.edit,"onUpdate:modelValue":d[4]||(d[4]=f=>w.edit=f),detail:M.data,onSubmit:i},null,8,["modelValue","detail"])):T("",!0)])}}});export{t3 as default};
